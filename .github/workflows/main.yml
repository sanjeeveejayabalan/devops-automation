name: ci.yml

on:
  push:
    branches:
      - main
jobs:
  Zap-Scan:
    runs-on: ubuntu-latest
    
    steps:
      - name: Run ZAP Full Scan
        uses: zaproxy/action-baseline@master
        with:
          target: https://devsecopsvm.m2pfintech.com 
          output: report_json.json
          
      - name: list
        run: |
          ls 
          cat report_json.json         
          
      - name: Convert JSON to XML
        run: |
          jq -r 'def json2xml: . as $in | reduce keys_unsorted[] as $key (""; . + "<\($key)>\($in[$key] | if type == \"object\" then json2xml else . end)</\($key)>") | json2xml' report_json.json > output.xml
        working-directory: ${{ github.workspace }}
                 
      - name: list
        run: |
          ls 
          cat output.xml     
              
              
